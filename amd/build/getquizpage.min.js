define("quizaccess_tcquiz/getquizpage",["exports","core/str","core/notification"],(function(_exports,_str,_notification){var obj;
/**
   * Go to the current quiz page. Used in the tcq_review_page (for student)
   * in tcquiz renderer.
   *
   * @module     quizaccess_tcquiz
   * @copyright  2024 Capilano University
   * @author     Tamara Dakic <tdakic@capilanou.ca>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=(obj=_notification)&&obj.__esModule?obj:{default:obj};const registerEventListeners=(sessionid,quizid,cmid,attemptid,page,POLLING_INTERVAL)=>{document.goToCurrentQuizPageEvent=setInterval((async()=>{await async function(sessionid,quizid,cmid,attemptid,page){var result=await fetch(M.cfg.wwwroot+"/mod/quiz/accessrule/tcquiz/quizdatastudent.php?quizid="+quizid+"&sessionid="+sessionid+"&cmid="+cmid+"&attempt="+attemptid+"&sesskey="+M.cfg.sesskey+"&page="+page,{method:"POST"}),responseXMLText=await result.text();await function(responseXMLText){const responseXML=(new DOMParser).parseFromString(responseXMLText,"text/html");var quizresponse=responseXML.getElementsByTagName("tcquiz").item(0);if(null===quizresponse)return void _notification.default.addNotification({message:(0,_str.get_string)("invalidserverresponse","quizaccess_tcquiz"),type:"error"});var quizstatus=quizresponse.getElementsByTagName("status").item(0).textContent;if("showquestion"==quizstatus){clearInterval(document.goToCurrentQuizPageEvent);var attemptURL=quizresponse.getElementsByTagName("url").item(0).textContent;window.location.replace(attemptURL)}else if("showresults"==quizstatus);else if("finalresults"==quizstatus){clearInterval(document.goToCurrentQuizPageEvent);var finalURL=quizresponse.getElementsByTagName("url").item(0).textContent;window.location.replace(finalURL)}else if("quiznotrunning"==quizstatus||"waitforquestion"==quizstatus||"waitforresults"==quizstatus||"noaction"==quizstatus);else if("error"==quizstatus){var errmsg=quizresponse.getElementsByTagName("message").item(0).textContent;_notification.default.addNotification({message:errmsg,type:"error"})}else _notification.default.addNotification({message:(0,_str.get_string)("unknownserverresponse","quizaccess_tcquiz")+quizstatus,type:"error"})}(responseXMLText)}(sessionid,quizid,cmid,attemptid,page)}),POLLING_INTERVAL)};_exports.init=(sessionid,quizid,cmid,attemptid,page,POLLING_INTERVAL)=>{registerEventListeners(sessionid,quizid,cmid,attemptid,page,POLLING_INTERVAL)}}));

//# sourceMappingURL=getquizpage.min.js.map