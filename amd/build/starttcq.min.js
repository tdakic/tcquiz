define("quizaccess_tcquiz/starttcq",["exports","core/notification","core/str"],(function(_exports,_notification,_str){var obj;
/**
   * Allows the teacher to start tcquiz
   *
   * The actual form for typing in the new joincode and starting a new quiz is in
   * /mod/quiz/accessrule/tcquiz/classes/form/tcq_start_form.php
   * and is validated by the validation method
   *
   * @module     quizaccess_tcquiz
   * @copyright  2024 Capilano University
   * @author     Tamara Dakic <tdakic@capilanou.ca>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=(obj=_notification)&&obj.__esModule?obj:{default:obj};const Selectors_actions={startTCQButton:'[data-action="quizaccess_tcquiz/starttcq-startnew_button"]',endButton:'[data-action="quizaccess_tcquiz/starttcq-end_button"]',rejoinButton:'[data-action="quizaccess_tcquiz/starttcq-rejoin_button"]'};_exports.init=(sessionid,joincode,timestamp,currentpage,status,attemptid,existingsession,quizid,cmid)=>{((sessionid,joincode,timestamp,currentpage,status,attemptid,existingsession,quizid,cmid)=>{const endTCQAction=document.querySelector(Selectors_actions.endButton);null!==endTCQAction&&endTCQAction.addEventListener("click",(async e=>{e.preventDefault();var url=M.cfg.wwwroot+"/mod/quiz/accessrule/tcquiz/end_session.php?id="+e.target.name+"&cmid="+cmid;await fetch(url,{method:"POST"}).then((response=>(response.ok?location.reload():_notification.default.addNotification({message:(0,_str.get_string)("errorclosingsession","quizaccess_tcquiz"),type:"error"}),null)))}),{once:!0});const rejoinTCQAction=document.querySelector(Selectors_actions.rejoinButton);null!==endTCQAction&&rejoinTCQAction.addEventListener("click",(async e=>{e.preventDefault();const response=await fetch(M.cfg.wwwroot+"/mod/quiz/accessrule/tcquiz/tcq_constants.json"),tcqConsts=await response.json();var url="";status==tcqConsts.TCQUIZ_STATUS_READYTOSTART?(url=M.cfg.wwwroot+"/mod/quiz/accessrule/tcquiz/wait_for_students.php?quizid="+quizid+"&cmid="+cmid+"&attemptid="+attemptid+"&joincode="+joincode+"&sessionid="+sessionid,window.location.replace(url)):status==tcqConsts.TCQUIZ_STATUS_PREVIEWQUESTION||status==tcqConsts.TCQUIZ_STATUS_SHOWQUESTION?(url=M.cfg.wwwroot+"/mod/quiz/accessrule/tcquiz/attempt.php?showall=0&quizid="+quizid+"&cmid="+cmid+"&attempt="+attemptid+"&joincode"+joincode+"&sessionid="+sessionid+"&page="+currentpage,window.location.replace(url)):status==tcqConsts.TCQUIZ_STATUS_SHOWRESULTS?(url=M.cfg.wwwroot+"/mod/quiz/accessrule/tcquiz/review_tcq.php?showall=false&quizid="+quizid+"&cmid="+cmid+"&attempt="+attemptid+"&joincode"+joincode+"&sessionid="+sessionid+"&page="+currentpage,window.location.replace(url)):status==tcqConsts.TCQUIZ_STATUS_FINALRESULTS?(url=M.cfg.wwwroot+"/mod/quiz/accessrule/tcquiz/report_final_results.php?mode=overview&quizid="+quizid+"&id="+cmid+"&tcqsid="+sessionid,window.location.replace(url)):_notification.default.addNotification({message:(0,_str.get_string)("errorrejoining","quizaccess_tcquiz"),type:"error"})}),{once:!0}),document.addEventListener("click",(e=>{e.target.closest(Selectors_actions.startTCQButton)&&e.preventDefault()}),{once:!0})})(sessionid,joincode,0,currentpage,status,attemptid,0,quizid,cmid)}}));

//# sourceMappingURL=starttcq.min.js.map